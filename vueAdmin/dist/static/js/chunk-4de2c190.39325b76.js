(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4de2c190"],{"0cb1":function(e,t,r){},"21e0":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[r("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"副标题",prop:"label"}},[r("el-input",{model:{value:e.ruleForm.label,callback:function(t){e.$set(e.ruleForm,"label",t)},expression:"ruleForm.label"}})],1),r("el-form-item",{attrs:{label:"排列序号",prop:"sortOrder"}},[r("el-input",{model:{value:e.ruleForm.sortOrder,callback:function(t){e.$set(e.ruleForm,"sortOrder",t)},expression:"ruleForm.sortOrder"}})],1),r("el-form-item",{attrs:{label:"作者名称",prop:"addUser"}},[r("el-input",{model:{value:e.ruleForm.addUser,callback:function(t){e.$set(e.ruleForm,"addUser",t)},expression:"ruleForm.addUser"}})],1),r("el-form-item",{attrs:{label:"链接",prop:"link"}},[r("el-input",{model:{value:e.ruleForm.link,callback:function(t){e.$set(e.ruleForm,"link",t)},expression:"ruleForm.link"}})],1),r("el-form-item",{attrs:{label:"是可以被搜索",prop:"isSearch"}},[r("el-radio-group",{model:{value:e.ruleForm.isSearch,callback:function(t){e.$set(e.ruleForm,"isSearch",t)},expression:"ruleForm.isSearch"}},[r("el-radio",{attrs:{label:!0}},[e._v("是")]),r("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),r("el-form-item",{attrs:{label:"关键字"}},[e._l(e.keywords,(function(t){return r("el-tag",{key:t,attrs:{closable:"",type:"primary"},on:{close:function(r){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),e.newKeywordVisible?r("el-input",{ref:"newKeywordInput",staticClass:"input-new-keyword",on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.newKeyword,callback:function(t){e.newKeyword=t},expression:"newKeyword"}}):r("el-button",{staticClass:"button-new-keyword",attrs:{type:"primary"},on:{click:e.showInput}},[e._v("+ 增加")])],2),r("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"3rem","margin-bottom":"3rem",padding:"1rem"}},[r("h3",[e._v("文章参数")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleAttributeShow}},[e._v("添加")]),r("el-table",{attrs:{data:e.attributesData}},[r("el-table-column",{attrs:{property:"attribute",label:"文章参数名称"}}),r("el-table-column",{attrs:{property:"value",label:"文章参数值"}}),r("el-table-column",{attrs:{align:"center",label:"操作",width:"200","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.handleAttributeShow(t.row)}}},[e._v("设置")]),r("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.handleAttributeDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("el-dialog",{attrs:{visible:e.attributeVisiable,title:e.attributeAdd?"添加文章参数":"编辑文章参数"},on:{"update:visible":function(t){e.attributeVisiable=t}}},[r("el-form",{ref:"attributeForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:e.attributeForm,"status-icon":"","label-position":"left","label-width":"100px"}},[r("el-form-item",{attrs:{label:"文章参数名称",prop:"attribute"}},[r("el-input",{model:{value:e.attributeForm.attribute,callback:function(t){e.$set(e.attributeForm,"attribute",t)},expression:"attributeForm.attribute"}})],1),r("el-form-item",{attrs:{label:"文章参数值",prop:"value"}},[r("el-input",{model:{value:e.attributeForm.value,callback:function(t){e.$set(e.attributeForm,"value",t)},expression:"attributeForm.value"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.attributeVisiable=!1}}},[e._v("取消")]),e.attributeAdd?r("el-button",{attrs:{type:"primary"},on:{click:e.handleAttributeAdd}},[e._v("确定")]):r("el-button",{attrs:{type:"primary"},on:{click:e.handleAttributeEdit}},[e._v("确定")])],1)],1)],1),r("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"3rem"}},[r("h3",[e._v("上传附件")]),r("el-form",{ref:"enclosure",attrs:{model:e.enclosure,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"上传附件",prop:"isUpload"}},[r("el-radio-group",{model:{value:e.enclosure.isUpload,callback:function(t){e.$set(e.enclosure,"isUpload",t)},expression:"enclosure.isUpload"}},[r("el-radio",{attrs:{label:!0}},[e._v("对象存储")])],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.enclosure.isUpload,expression:"enclosure.isUpload == true"}],attrs:{label:"上传附件"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadPath,headers:e.headers,"on-success":e.uploadSuccess,"on-preview":e.handlePreviewBfile,"on-remove":e.handleRemoveBfile,"before-remove":e.beforeRemoveBfile,multiple:"",limit:1,"on-exceed":e.handleExceedBfile,"file-list":e.accfileList}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传文件，且不超过20M")])],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.enclosure.isUpload,expression:"enclosure.isUpload == false"}],attrs:{label:"云盘网址",prop:"BaiDuurl"}},[r("el-input",{model:{value:e.enclosure.BaiDuurl,callback:function(t){e.$set(e.enclosure,"BaiDuurl",t)},expression:"enclosure.BaiDuurl"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.enclosure.isUpload,expression:"enclosure.isUpload == false"}],attrs:{label:"提取码",prop:"BaiDuurl"}},[r("el-input",{model:{value:e.enclosure.code,callback:function(t){e.$set(e.enclosure,"code",t)},expression:"enclosure.code"}})],1)],1)],1),r("el-form-item",{attrs:{label:"文章分类",prop:"categoryId"}},[r("el-cascader",{attrs:{options:e.options,props:{expandTrigger:"hover"}},on:{change:e.handleChange},model:{value:e.ruleForm.categoryId,callback:function(t){e.$set(e.ruleForm,"categoryId",t)},expression:"ruleForm.categoryId"}})],1),r("el-form-item",{attrs:{label:"文章图片",prop:"picUrl"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.headers,action:e.uploadPath,"show-file-list":!1,"on-success":e.uploadPicUrl,accept:".jpg,.jpeg,.png,.gif"}},[e.ruleForm.picUrl?r("img",{staticClass:"avatar",attrs:{src:e.ruleForm.picUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"文章详细介绍",prop:"context"}},[r("editor",{attrs:{init:e.editorInit},model:{value:e.ruleForm.context,callback:function(t){e.$set(e.ruleForm,"context",t)},expression:"ruleForm.context"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即更新")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},i=[],n=(r("99af"),r("c975"),r("a434"),r("d3b7"),r("ac1f"),r("25f0"),r("1276"),r("ca72")),a=r("2423"),s=r("aecd"),l=r("5c96"),c=r("5f87"),u={components:{Editor:n["a"]},data:function(){return{uploadPath:s["e"],enclosure:{isUpload:void 0},fileList:[],newKeywordVisible:!1,newKeyword:"",id:void 0,ruleForm:{title:"",isSearch:!0,categoryId:[],picUrl:""},options:[],attributeVisiable:!1,attributeAdd:!0,attributes:[],attributeForm:{attribute:"",value:""},keywords:[],editorInit:{language:"zh_CN",height:500,convert_urls:!1,plugins:["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],toolbar:["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],images_upload_handler:function(e,t,r){var o=new FormData;o.append("file",e.blob()),Object(s["a"])(o).then((function(e){t(e.data.data.url)})).catch((function(){r("上传失败，请重新上传")}))}},isAccessory:void 0,accessory:{},accfileList:[],accId:"",rules:{title:[{required:!0,message:"请输入文章标题",trigger:"blur"},{min:1,max:99,message:"长度最少 1 个字符",trigger:"blur"}],class:[{required:!0,message:"请选择分类",trigger:"change"}],sortOrder:[{required:!0,message:"请填写排列序号",trigger:"blur"}],categoryId:[{required:!0,message:"请选择活动区域",trigger:"change"}]}}},computed:{headers:function(){return{"X-eye-Admin-Token":Object(c["a"])()}},attributesData:function(){for(var e=[],t=0;t<this.attributes.length;t++)this.attributes[t].deleted||e.push(this.attributes[t]);return e}},mounted:function(){var e=this;this.id=this.$route.query.id;var t={id:this.id};Object(a["h"])(t).then((function(t){console.log(t.data.data.article),e.ruleForm=t.data.data.article,e.ruleForm.categoryId=t.data.data.categoryIds,e.attributes=t.data.data.attributes,void 0===t.data.data.accessory?e.isAccessory=!1:t.data.data.accessory.accessoryCode?(e.enclosure.isUpload=!1,e.accId=t.data.data.accessory.id,e.accessory=t.data.data.accessory):(e.isAccessory=!0,e.accId=t.data.data.accessory.id,e.accfileList.push(t.data.data.accessory),console.log(e.accfileList),e.enclosure.isUpload=!0),""===e.ruleForm.keywords&&(e.ruleForm.keywords=null);var r=t.data.data.article.keywords;null!==r&&(e.keywords=r.split(","))})),Object(a["d"])().then((function(t){e.options=t.data.data.list}))},methods:{handleExceedBfile:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemoveBfile:function(e,t){this.fileList=t},handleRemoveBfile:function(e,t){this.accfileList=[],console.log(e,t)},uploadSuccess:function(e,t,r){this.accfileList=r},handlePreviewBfile:function(e){console.log(e)},handleAttributeAdd:function(){this.attributes.unshift(this.attributeForm),this.attributeVisiable=!1},handleAttributeEdit:function(){this.attributeForm.updateTime="";for(var e=0;e<this.attributes.length;e++){var t=this.attributes[e];if(t.id===this.attributeForm.id){this.attributes.splice(e,1,this.attributeForm);break}}this.attributeVisiable=!1},handleAttributeDelete:function(e){e.deleted=!0},handleAttributeShow:function(e){console.log(e),e.value?(this.attributeForm=Object.assign({},e),this.attributeAdd=!1):(this.attributeForm={},this.attributeAdd=!0),this.attributeVisiable=!0},showInput:function(){var e=this;this.newKeywordVisible=!0,this.$nextTick((function(t){e.$refs.newKeywordInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.newKeyword;e&&(this.keywords.push(e),this.ruleForm.keywords=this.keywords.toString()),this.newKeywordVisible=!1,this.newKeyword=""},handleClose:function(e){this.keywords.splice(this.keywords.indexOf(e),1),this.ruleForm.keywords=this.keywords.toString()},uploadPicUrl:function(e){this.ruleForm.picUrl=e.data.url},handleChange:function(e){console.log(e),console.log(this.ruleForm)},submitForm:function(e){var t=this,r={id:this.id};0===this.accfileList.length&&!0===this.isAccessory?r.deleted=!0:!0===this.enclosure.isUpload&&this.accfileList[0]?this.accfileList[0].response?(r=this.accfileList[0].response.data,r.id=this.id,r.deleted=!1):(r.deleted=!1,r=this.accfileList[0],r.id=this.id):!1===this.enclosure.isUpload&&this.accessory.accessoryCode&&this.accessory.accessoryLink?(r.id=this.id,r.deleted=!1,r.accessoryLink=this.accessory.accessoryLink,r.accessoryCode=this.accessory.accessoryCode):r.deleted=!0,console.log(r),this.$refs[e].validate((function(e){if(!e)return!1;t.ruleForm.categoryId=t.ruleForm.categoryId[1];var o={article:t.ruleForm,attributes:t.attributes,accessory:r};Object(a["j"])(o).then((function(e){t.$notify.success({title:"成功",message:"更新成功"}),t.$router.push({path:"/article/articleList"})})).catch((function(e){l["MessageBox"].alert("业务错误："+e.data.errmsg,"警告",{confirmButtonText:"确定",type:"error"})}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},d=u,p=(r("a936"),r("0c7c")),m=Object(p["a"])(d,o,i,!1,null,"6ab42979",null);t["default"]=m.exports},2423:function(e,t,r){"use strict";r.d(t,"f",(function(){return i})),r.d(t,"j",(function(){return n})),r.d(t,"g",(function(){return a})),r.d(t,"h",(function(){return s})),r.d(t,"i",(function(){return l})),r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return d})),r.d(t,"e",(function(){return p})),r.d(t,"c",(function(){return m}));var o=r("b775");function i(e){return Object(o["a"])({url:"/article/create",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/article/update",method:"post",data:e})}function a(e){return Object(o["a"])({url:"/article/delete",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/article/detail",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/article/list",method:"get",params:e})}function c(){return Object(o["a"])({url:"/categoryx/cate",method:"get"})}function u(){return Object(o["a"])({url:"/categoryx/list",method:"get"})}function d(e){return Object(o["a"])({url:"/categoryx/create",method:"post",data:e})}function p(e){return Object(o["a"])({url:"/categoryx/update",method:"post",data:e})}function m(e){return Object(o["a"])({url:"/categoryx/delete",method:"post",data:e})}},a936:function(e,t,r){"use strict";var o=r("0cb1"),i=r.n(o);i.a},aecd:function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n})),r.d(t,"d",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"e",(function(){return l}));var o=r("b775");function i(e){return Object(o["a"])({url:"/storage/list",method:"get",params:e})}function n(e){return Object(o["a"])({url:"/storage/create",method:"post",data:e})}function a(e){return Object(o["a"])({url:"/storage/update",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/storage/delete",method:"post",data:e})}var l="https://wwwapidev.6eye9.com/admin/storage/create"},c4a9:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return i}));var o=function(){return"undefined"!==typeof window?window:e},i=function(){var e=o();return e&&e.tinymce?e.tinymce:null}}).call(this,r("24aa"))},ca72:function(e,t,r){"use strict";var o=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],i=function(e){return-1!==o.indexOf(e)},n=function(e,t,r){Object.keys(t).filter(i).forEach((function(o){var i=t[o];"function"===typeof i&&("onInit"===o?i(e,r):r.on(o.substring(2),(function(e){return i(e,r)})))}))},a=function(e,t){var r,o=e.$props.modelEvents?e.$props.modelEvents:null,i=Array.isArray(o)?o.join(" "):o;e.$watch("value",(function(e,o){t&&"string"===typeof e&&e!==r&&e!==o&&(t.setContent(e),r=e)})),t.on(i||"change keyup undo redo",(function(){r=t.getContent(),e.$emit("input",r)}))},s=function(e,t,r){var o=t.$props.value?t.$props.value:"",i=t.$props.initialValue?t.$props.initialValue:"";r.setContent(o||i),t.$listeners.input&&a(t,r),n(e,t.$listeners,r)},l=0,c=function(e){var t=Date.now(),r=Math.floor(1e9*Math.random());return l++,e+"_"+r+l+String(t)},u=function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()},d=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},p=function(e,t){return d(e).concat(d(t))},m=function(e,t,r,o){var i=t.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=e,i.addEventListener("load",o),i.src=r,t.head&&t.head.appendChild(i)},f=function(){return{listeners:[],scriptId:c("tiny-script"),scriptLoaded:!1}},h=function(e,t,r,o){e.scriptLoaded?o():(e.listeners.push(o),t.getElementById(e.scriptId)||m(e.scriptId,t,r,(function(){e.listeners.forEach((function(e){return e()})),e.scriptLoaded=!0})))},b=r("c4a9"),y={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean},g=function(){return g=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},g.apply(this,arguments)},v=f(),w=function(e,t,r){return e(r||"div",{attrs:{id:t}})},k=function(e,t){return e("textarea",{attrs:{id:t},style:{visibility:"hidden"}})},F=function(e){return function(){var t=g({},e.$props.init,{readonly:e.$props.disabled,selector:"#"+e.elementId,plugins:p(e.$props.init&&e.$props.init.plugins,e.$props.plugins),toolbar:e.$props.toolbar||e.$props.init&&e.$props.init.toolbar,inline:e.inlineEditor,setup:function(t){e.editor=t,t.on("init",(function(r){return s(r,e,t)})),e.$props.init&&"function"===typeof e.$props.init.setup&&e.$props.init.setup(t)}});u(e.element)&&(e.element.style.visibility=""),Object(b["a"])().init(t)}},x={props:y,created:function(){this.elementId=this.$props.id||c("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==Object(b["a"])())F(this)();else if(this.element&&this.element.ownerDocument){var e=this.element.ownerDocument,t=this.$props.cloudChannel?this.$props.cloudChannel:"5",r=this.$props.apiKey?this.$props.apiKey:"no-api-key";h(v,e,"https://cdn.tiny.cloud/1/"+r+"/tinymce/"+t+"/tinymce.min.js",F(this))}},beforeDestroy:function(){null!==Object(b["a"])()&&Object(b["a"])().remove(this.editor)},render:function(e){return this.inlineEditor?w(e,this.elementId,this.$props.tagName):k(e,this.elementId)}};t["a"]=x}}]);