webpackJsonp([6],{SqkQ:function(t,e){},Xpdv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("P9l9"),s={name:"product",components:{},watch:{$route:{handler:function(t,e){console.log(t),this.isActive=t.query.index,this.isActive||0==this.isActive?(this.id=t.query.id,this.isActive=t.query.index,this.categoryId=t.query.categoryId,this.getList(),this.getArtList()):(this.categoryId=t.query.categoryId,this.getList(),this.getSearchList())},deep:!0}},data:function(){return{currentPage:1,productList:[],imgB:"",categoryId:this.$route.query.categoryId,id:this.$route.query.id?this.$route.query.id:"",page:1,total:null,artList:[],showSort:"",isActive:this.$route.query.index||0==this.$route.query.index?this.$route.query.index:-1}},created:function(){this.getList();localStorage.getItem("search_key");-1==this.isActive?this.getSearchList():this.getArtList()},methods:{routerTo:function(t,e){this.$router.push({path:"/product",query:{id:t.id,categoryId:this.categoryId,index:e}})},routerToDetail:function(t){this.$router.push({path:"/productDetail",query:{id:t.id,categoryId:this.categoryId,index:this.isActive}})},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){console.log("当前页: "+t),this.page=t,this.getArtList()},getList:function(){var t=this;Object(i.d)({id:this.categoryId}).then(function(e){0==e.data.errno?(t.productList=e.data.data.categoryList,t.imgB=e.data.data.category.picUrl,t.isActive>=0&&(t.showSort=t.productList[t.isActive].name)):t.$message.error(e.data.errmsg)})},getArtList:function(){var t=this,e={categoryId:this.id,page:this.page};Object(i.c)(e).then(function(e){0==e.data.errno?(t.artList=e.data.data.list,t.total=e.data.data.total):t.$message.error(e.data.errmsg)})},getSearchList:function(){var t=this,e=localStorage.getItem("search_key");Object(i.g)({query:e}).then(function(e){0==e.data.errno?(t.artList=e.data.data.queryResult,t.showSort="",t.total=e.data.data.total):t.$message.error(e.data.errmsg)})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Home-root"},[a("div",{staticClass:"top_car"},[a("img",{attrs:{src:t.imgB,alt:""}})]),t._v(" "),a("div",{staticClass:"content last_content"},[a("div",{staticClass:"content_info"},[a("div",{staticClass:"left_info"},[a("img",{attrs:{src:"http://www.stainless-steel-pipe-factory.com/images/leftproducttitle.jpg",alt:""}}),t._v(" "),a("ul",{staticClass:"leftUL"},t._l(t.productList,function(e,i){return a("li",{key:i,class:{active:t.isActive==i},on:{click:function(a){return t.routerTo(e,i)}}},[t._v("\n            "+t._s(e.name)+"\n          ")])}),0)]),t._v(" "),a("div",{staticClass:"right_info"},[a("div",{staticClass:"topBreadcrumb"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),t.showSort?a("el-breadcrumb-item",[t._v(" "+t._s(t.showSort)+" ")]):a("el-breadcrumb-item",[t._v("商品列表")])],1),t._v(" "),t.showSort?a("span",{staticClass:"nowLocation"},[t._v(t._s(t.showSort))]):a("span",{staticClass:"nowLocation"},[t._v("商品列表")])],1),t._v(" "),a("div",{staticClass:"rightList"},[t.artList.length>0?a("div",{staticClass:"imgListCon"},t._l(t.artList,function(e,i){return a("div",{key:i,staticClass:"cont_info",class:i%3==2?"noR":"",on:{click:function(a){return t.routerToDetail(e)}}},[a("img",{attrs:{src:e.picUrl,alt:""}}),t._v(" "),t.showSort?a("p",{staticClass:"title"},[t._v(t._s(t.showSort))]):a("p",{staticClass:"title"},[t._v(t._s(e.categoryName))]),t._v(" "),a("p",{staticClass:"text",domProps:{innerHTML:t._s(e.title)}},[t._v(t._s(e.title))])])}),0):a("p",{staticClass:"no_product"},[t._v("暂时没有搜索到产品")]),t._v(" "),a("div",{staticClass:"pages"},[t.artList.length>0?a("el-pagination",{attrs:{background:"","current-page":t.currentPage,layout:"total, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}}):t._e()],1)])])])])])},staticRenderFns:[]};var o=a("VU/8")(s,r,!1,function(t){a("SqkQ")},"data-v-0d087a26",null);e.default=o.exports}});
//# sourceMappingURL=6.153e0a5f8cbcc863c0c5.js.map